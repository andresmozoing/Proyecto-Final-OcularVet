"use strict";(self.webpackChunkauthApp=self.webpackChunkauthApp||[]).push([[153],{2153:(x,A,s)=>{s.r(A),s.d(A,{ProtectedModule:()=>H});var g=s(6895),a=s(433),h=s(6134),d=s(1508),f=s(9646),e=s(1571),Z=s(6518);let v=(()=>{class t{constructor(i,o){this.authService=i,this.router=o}canActivate(){return console.log("canActivate del validarAdmin"),console.log("Usuario es ",this.authService.usuario),this.authService.usuario.isAdmin||this.router.navigateByUrl("/ocularVet/alumno/accesoAdminDenegado"),(0,f.of)(this.authService.usuario.isAdmin)}canLoad(){return console.log("canLoad del validarAdmin"),this.authService.usuario.isAdmin||(console.log("va a iunterntar"),this.router.navigateByUrl("/ocularVet/alumno/accesoAdminDenegado")),(0,f.of)(this.authService.usuario.isAdmin)}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(Z.e),e.LFG(d.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function I(t,n){1&t&&(e.TgZ(0,"div")(1,"a",31),e._UZ(2,"i",32),e.TgZ(3,"span",26),e._uU(4," Notas "),e.qZA()()())}function u(t,n){1&t&&(e.TgZ(0,"div")(1,"a",33),e._UZ(2,"i",32),e.TgZ(3,"span",26),e._uU(4," Notas "),e.qZA()()())}function c(t,n){1&t&&(e.TgZ(0,"div")(1,"li",23)(2,"a",34),e._UZ(3,"i",35),e.TgZ(4,"span",26),e._uU(5,"Administrar usuarios"),e.qZA()()()())}function p(t,n){1&t&&(e.TgZ(0,"div")(1,"li",23)(2,"a",36),e._UZ(3,"i",37),e.TgZ(4,"span",26),e._uU(5,"Configuraci\xf3n administrador "),e.qZA()()()())}let m=(()=>{class t{constructor(i,o){this.router=i,this.authservice=o}ngOnInit(){}get usuario(){return this.authservice.usuario}logOut(){this.authservice.logout(),this.router.navigateByUrl("/auth/login")}get isAdmin(){return this.authservice.usuario.isAdmin?"PROFESOR":"ALUMNO"}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(d.F0),e.Y36(Z.e))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main"]],decls:56,vars:7,consts:[["lang","en"],["charset","utf-8"],["content","width=device-width, initial-scale=1.0","name","viewport"],["content","","name","description"],["content","","name","keywords"],[1,"background"],["id","header",1,"header","fixed-top","d-flex","align-items-center"],[1,"d-flex","align-items-center","justify-content-between"],["routerLink","inicio",1,"logo","d-flex","align-items-center"],["src","../../../assets/images/logo.webp",2,"max-height","8.5vh"],[1,""],[1,"header-nav","ms-auto"],[1,"d-flex","align-items-center"],["routerLink","ejercicio",1,"nav-link","nav-options","d-flex","align-items-center"],["src","../../../assets/images/favicon.webp"],[4,"ngIf"],[1,"nav-item","dropdown","pe-3"],["href","#","data-bs-toggle","dropdown",1,"nav-link","nav-profile","d-flex","align-items-center","pe-0"],[1,"nav-icon","bi-gear-fill"],[1,"d-none","d-md-block","dropdown-toggle","ps-2"],[1,"dropdown-menu","dropdown-menu-end","dropdown-menu-arrow","profile"],[1,"dropdown-header",2,"margin","0px"],[1,"dropdown-divider"],[2,"margin","4px"],["routerLink","perfil",1,"dropdown-item","d-flex","align-items-center",2,"margin","5px"],[1,"bi","bi-person"],[1,"p-1"],["href","#",1,"dropdown-item","d-flex","align-items-center",2,"margin","5px",3,"click"],[1,"bi","bi-box-arrow-right"],["id","footer",1,"footer"],[1,"copyright"],["routerLink","admin/notasAdmin",1,"nav-link","nav-options","d-flex","align-items-center"],[1,"nav-icon","bi-list-check"],["routerLink","alumno/notas",1,"nav-link","nav-options","d-flex","align-items-center"],["routerLink","admin/administracionUsuarios",1,"dropdown-item","d-flex","align-items-center",2,"margin","5px"],[1,"bi","bi-people"],["routerLink","admin/configAdmin",1,"dropdown-item","d-flex","align-items-center",2,"margin","5px"],[1,"bi","bi-wrench"]],template:function(i,o){1&i&&(e.TgZ(0,"html",0)(1,"head"),e._UZ(2,"meta",1)(3,"meta",2),e.TgZ(4,"title"),e._uU(5,"OcularVet - Inicio"),e.qZA(),e._UZ(6,"meta",3)(7,"meta",4),e.qZA(),e.TgZ(8,"body",5)(9,"header",6)(10,"div",7)(11,"div",8),e._UZ(12,"img",9),e.TgZ(13,"span",10),e._uU(14,"OcularVet"),e.qZA()()(),e.TgZ(15,"nav",11)(16,"ul",12)(17,"a",13),e._UZ(18,"img",14),e.TgZ(19,"span"),e._uU(20," Diagnosticar "),e.qZA()(),e.YNc(21,I,5,0,"div",15),e.YNc(22,u,5,0,"div",15),e.TgZ(23,"li",16)(24,"a",17),e._UZ(25,"i",18),e.TgZ(26,"span",19),e._uU(27,"Configuraci\xf3n"),e.qZA()(),e.TgZ(28,"ul",20)(29,"li",21)(30,"h6"),e._uU(31),e.qZA(),e.TgZ(32,"span"),e._uU(33),e.qZA()(),e.TgZ(34,"li"),e._UZ(35,"hr",22),e.qZA(),e.TgZ(36,"li",23)(37,"a",24),e._UZ(38,"i",25),e.TgZ(39,"span",26),e._uU(40,"Mis datos"),e.qZA()()(),e.YNc(41,c,6,0,"div",15),e.YNc(42,p,6,0,"div",15),e.TgZ(43,"li",23)(44,"a",27),e.NdJ("click",function(){return o.logOut()}),e._UZ(45,"i",28),e.TgZ(46,"span",26),e._uU(47,"Cerrar Sesi\xf3n"),e.qZA()()()()()()()(),e.TgZ(48,"div"),e._UZ(49,"router-outlet"),e.qZA(),e.TgZ(50,"footer",29)(51,"div",30),e._uU(52," \xa9 "),e.TgZ(53,"strong")(54,"span"),e._uU(55," OcularVet "),e.qZA()()()()()()),2&i&&(e.xp6(21),e.Q6J("ngIf",!0===o.usuario.isAdmin),e.xp6(1),e.Q6J("ngIf",!1===o.usuario.isAdmin),e.xp6(9),e.AsE("",o.usuario.name," ",o.usuario.surname,""),e.xp6(2),e.Oqu(o.isAdmin),e.xp6(8),e.Q6J("ngIf",!0===o.usuario.isAdmin),e.xp6(1),e.Q6J("ngIf",!0===o.usuario.isAdmin))},dependencies:[g.O5,d.lC,d.rH,d.yS]}),t})();var b=s(5226),l=s.n(b),T=s(5206),U=s(3456);function C(t,n){1&t&&(e.TgZ(0,"span",36),e._uU(1," Este campo es requerido. "),e.qZA())}function O(t,n){1&t&&(e.TgZ(0,"span",36),e._uU(1," Este campo es requerido. "),e.qZA())}function N(t,n){1&t&&(e.TgZ(0,"span",36),e._uU(1," Este campo es requerido. "),e.qZA())}function E(t,n){1&t&&(e.TgZ(0,"span",36),e._uU(1," Ingrese un email v\xe1lido. "),e.qZA())}function F(t,n){1&t&&(e.TgZ(0,"div",36),e._uU(1," Ingrese una contrase\xf1a v\xe1lida (m\xednimo 6 caracteres). "),e.qZA())}function q(t,n){1&t&&(e.TgZ(0,"div",36),e._uU(1," Ingrese una contrase\xf1a v\xe1lida (m\xednimo 6 caracteres). "),e.qZA())}function M(t,n){1&t&&(e.TgZ(0,"div",36),e._uU(1," Ingrese una contrase\xf1a v\xe1lida (m\xednimo 6 caracteres). "),e.qZA())}let D=(()=>{class t{constructor(i,o,r){this.authservice=i,this.usuarioService=o,this.notaService=r,this.perfilForm=new a.nJ({name:new a.p4(this.authservice.usuario.name,a.kI.required),surname:new a.p4(this.authservice.usuario.surname,a.kI.required),DNI:new a.p4(this.authservice.usuario.DNI),email:new a.p4(this.authservice.usuario.email,[a.kI.required,a.kI.email])}),this.passwordForm=new a.nJ({passwordActual:new a.p4("",[a.kI.required,a.kI.minLength(6)]),passwordNueva:new a.p4("",[a.kI.required,a.kI.minLength(6)]),repeticionPassword:new a.p4("",[a.kI.required,a.kI.minLength(6)])}),this.mostrarOcultarPassword=!1}get usuario(){return this.authservice.usuario}onSubmitProfile(){this.usuarioService.modificarUsuario(this.authservice.usuario.uid,this.perfilForm.value.name,this.perfilForm.value.surname,this.perfilForm.value.email).subscribe(i=>{!0===i.ok?((this.authservice.usuario.name!==this.perfilForm.value.name||this.authservice.usuario.surname!==this.perfilForm.value.surname)&&this.notaService.modificarNombre_y_apellido(this.authservice.usuario.DNI,this.perfilForm.value.name,this.perfilForm.value.surname).subscribe(()=>{console.log("TERMINO DE MODIFICAR ")}),this.authservice.editUsuario(this.perfilForm.value.name,this.perfilForm.value.surname,this.perfilForm.value.email),l().fire("Usuario modificado","","success")):(console.log("Error al editar usuario",i,"error"),l().fire("Error al editar usuario","El email ingresado ya existe","error"))})}onSubmitPassword(){this.passwordForm.value.passwordNueva===this.passwordForm.value.repeticionPassword?this.passwordForm.value.passwordNueva.length>5?this.usuarioService.modificarPassword(this.authservice.usuario.uid,this.passwordForm.value.passwordActual,this.passwordForm.value.passwordNueva).subscribe(o=>{!0===o.ok?(l().fire("Contrase\xf1a modificada exitosamente!","","success"),this.passwordForm.controls.passwordActual.reset(),this.passwordForm.controls.passwordNueva.reset(),this.passwordForm.controls.repeticionPassword.reset()):(console.log("Error al editar usuario",o,"error"),l().fire("Error al editar contrase\xf1a","La contrase\xf1a actual ingresada no es v\xe1lida","error"))}):l().fire("Error al editar contrase\xf1a","La contrase\xf1a debe poseer mas de 6 caracteres","error"):l().fire("Error al editar contrase\xf1a","Las contrase\xf1as nuevas no coinciden","error")}campoNoValidoPerfilForm(i){return this.perfilForm.get(i)?.invalid&&this.perfilForm.get(i)?.touched}campoNoValidoPasswordForm(i){return this.passwordForm.get(i)?.invalid&&this.passwordForm.get(i)?.touched}mostrarOcultarPasswordFunction(){console.log("holsss"),this.mostrarOcultarPassword=!this.mostrarOcultarPassword}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(Z.e),e.Y36(T.i),e.Y36(U.v))},t.\u0275cmp=e.Xpm({type:t,selectors:[["perfil"]],decls:79,vars:18,consts:[["lang","en"],["id","main",1,"main"],[1,"section","profile"],[1,"col-xl"],[1,"card"],[1,"card-header"],[1,"card-body","pt-3"],[1,"nav","nav-tabs","nav-tabs-bordered"],[1,"nav-item"],["data-bs-toggle","tab","data-bs-target","#profile-edit",1,"nav-link","active"],["data-bs-toggle","tab","data-bs-target","#profile-change-password",1,"nav-link"],[1,"tab-content","pt-2"],["id","profile-edit",1,"tab-pane","fade","show","active","profile-edit","pt-3"],[3,"formGroup","ngSubmit"],[1,"row","mb-3"],["for","name",1,"col-md-4","col-lg-3","col-form-label"],[1,"col-md-8","col-lg-9"],["name","name","type","text","formControlName","name","id","name",1,"form-control",3,"value"],["class","form-text text-danger",4,"ngIf"],["for","surname",1,"col-md-4","col-lg-3","col-form-label"],["name","surname","type","text","formControlName","surname","id","surname",1,"form-control",3,"value"],["for","DNI",1,"col-md-4","col-lg-3","col-form-label"],["name","DNI","type","number","disabled","","id","DNI",1,"form-control",3,"value"],["for","email",1,"col-md-4","col-lg-3","col-form-label"],["name","email","type","text","formControlName","email","id","email",1,"form-control",3,"value"],[1,"text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["id","profile-change-password",1,"tab-pane","fade","pt-3"],["for","currentPassword",1,"col-md-4","col-lg-3","col-form-label"],["name","password","formControlName","passwordActual","id","currentPassword",1,"form-control",3,"type"],[1,"small","mb-0",2,"cursor","pointer",3,"click"],[1,"bi","bi-eye-fill","small","mb-0","text-center"],["for","newPassword",1,"col-md-4","col-lg-3","col-form-label"],["name","newpassword","formControlName","passwordNueva","id","passwordNueva",1,"form-control",3,"type"],["for","renewPassword",1,"col-md-4","col-lg-3","col-form-label"],["name","renewpassword","formControlName","repeticionPassword","id","repeticionPassword",1,"form-control",3,"type"],[1,"form-text","text-danger"]],template:function(i,o){1&i&&(e.TgZ(0,"html",0)(1,"body")(2,"main",1)(3,"section",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h1"),e._uU(8,"Mis datos"),e.qZA()(),e.TgZ(9,"div",6)(10,"ul",7)(11,"li",8)(12,"button",9),e._uU(13,"Editar Perfil"),e.qZA()(),e.TgZ(14,"li",8)(15,"button",10),e._uU(16,"Cambiar Contrase\xf1a"),e.qZA()()(),e.TgZ(17,"div",11)(18,"div",12)(19,"form",13),e.NdJ("ngSubmit",function(){return o.onSubmitProfile()}),e.TgZ(20,"div",14)(21,"label",15),e._uU(22,"Nombre"),e.qZA(),e.TgZ(23,"div",16),e._UZ(24,"input",17),e.YNc(25,C,2,0,"span",18),e.qZA()(),e.TgZ(26,"div",14)(27,"label",19),e._uU(28,"Apellido"),e.qZA(),e.TgZ(29,"div",16),e._UZ(30,"input",20),e.YNc(31,O,2,0,"span",18),e.qZA()(),e.TgZ(32,"div",14)(33,"label",21),e._uU(34,"DNI"),e.qZA(),e.TgZ(35,"div",16),e._UZ(36,"input",22),e.YNc(37,N,2,0,"span",18),e.qZA()(),e.TgZ(38,"div",14)(39,"label",23),e._uU(40,"Email"),e.qZA(),e.TgZ(41,"div",16),e._UZ(42,"input",24),e.YNc(43,E,2,0,"span",18),e.qZA()(),e.TgZ(44,"div",25)(45,"button",26),e._uU(46,"Cambiar Datos"),e.qZA()()()(),e.TgZ(47,"div",27)(48,"form",13),e.NdJ("ngSubmit",function(){return o.onSubmitPassword()}),e.TgZ(49,"div",14)(50,"label",28),e._uU(51,"Contrase\xf1a actual:"),e.qZA(),e.TgZ(52,"div",16),e._UZ(53,"input",29),e.TgZ(54,"div",30),e.NdJ("click",function(){return o.mostrarOcultarPasswordFunction()}),e.TgZ(55,"i",31),e._uU(56," Mostrar/ocultar contrase\xf1a "),e.qZA()(),e.YNc(57,F,2,0,"div",18),e.qZA()(),e.TgZ(58,"div",14)(59,"label",32),e._uU(60,"Contrase\xf1a nueva:"),e.qZA(),e.TgZ(61,"div",16),e._UZ(62,"input",33),e.TgZ(63,"div",30),e.NdJ("click",function(){return o.mostrarOcultarPasswordFunction()}),e.TgZ(64,"i",31),e._uU(65," Mostrar/ocultar contrase\xf1a "),e.qZA()(),e.YNc(66,q,2,0,"div",18),e.qZA()(),e.TgZ(67,"div",14)(68,"label",34),e._uU(69,"Re-ingresa nueva contase\xf1a:"),e.qZA(),e.TgZ(70,"div",16),e._UZ(71,"input",35),e.TgZ(72,"div",30),e.NdJ("click",function(){return o.mostrarOcultarPasswordFunction()}),e.TgZ(73,"i",31),e._uU(74," Mostrar/ocultar contrase\xf1a "),e.qZA()(),e.YNc(75,M,2,0,"div",18),e.qZA()(),e.TgZ(76,"div",25)(77,"button",26),e._uU(78,"Cambiar contrase\xf1a"),e.qZA()()()()()()()()()()()()),2&i&&(e.xp6(19),e.Q6J("formGroup",o.perfilForm),e.xp6(5),e.s9C("value",o.usuario.name),e.xp6(1),e.Q6J("ngIf",o.campoNoValidoPerfilForm("name")),e.xp6(5),e.s9C("value",o.usuario.surname),e.xp6(1),e.Q6J("ngIf",o.campoNoValidoPerfilForm("surname")),e.xp6(5),e.s9C("value",o.usuario.DNI),e.xp6(1),e.Q6J("ngIf",o.campoNoValidoPerfilForm("DNI")),e.xp6(5),e.s9C("value",o.usuario.email),e.xp6(1),e.Q6J("ngIf",o.campoNoValidoPerfilForm("email")),e.xp6(2),e.Q6J("disabled",!o.perfilForm.valid),e.xp6(3),e.Q6J("formGroup",o.passwordForm),e.xp6(5),e.Q6J("type",o.mostrarOcultarPassword?"text":"password"),e.xp6(4),e.Q6J("ngIf",o.campoNoValidoPasswordForm("passwordActual")),e.xp6(5),e.Q6J("type",o.mostrarOcultarPassword?"text":"password"),e.xp6(4),e.Q6J("ngIf",o.campoNoValidoPasswordForm("passwordNueva")),e.xp6(5),e.Q6J("type",o.mostrarOcultarPassword?"text":"password"),e.xp6(4),e.Q6J("ngIf",o.campoNoValidoPasswordForm("repeticionPassword")),e.xp6(2),e.Q6J("disabled",!o.passwordForm.valid))},dependencies:[g.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".btn-primary[_ngcontent-%COMP%] {\n      color: white;\n      background: #7b1fa2;\n      border-color: #7b1fa2;\n    }\n\n    .btn-primary[_ngcontent-%COMP%]:hover {\n      color: white;\n      background: #012970;\n      border-color: #012970;\n    }"]}),t})();var j=s(2340),S=s(262),z=s(529);let k=(()=>{class t{constructor(i){this.http=i,this.baseUrl=j.N.baseURL}obtenerTodosLosDiagnosticos(){return this.http.get(`${this.baseUrl}/diagnostico/obtenerTodosLosDiagnosticos`,{}).pipe((0,S.K)(r=>(0,f.of)(r.error.msg)))}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(z.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const J=["tiempoTerminadoSwal"],R=["respuestaCorrectaSwal"],L=["respuestaIncorrectaSwal"],Y=["autoevalucionFinalizadaSwal"];function B(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"p",23),e._uU(3," El reflejo fotopupilar se produce cuando la pupila reacciona y se contrae o se dilata como respuesta a un est\xedmulo lum\xednico. Este arco reflejo gestionado por el sistema nervioso aut\xf3nomo permite controlar la cantidad de luz a la que se exponen los ojos de modo que se evite una sobreexposici\xf3n o un deslumbramiento. Su mayor utilidad es en la semiolog\xeda del sistema nervioso y en particular en Oftalmolog\xeda su evaluaci\xf3n permite localizar el asiento de las lesiones de las v\xedas nerviosas del globo ocular."),e._UZ(4,"br")(5,"br"),e._uU(6," A continuaci\xf3n, se presentan diferentes \u201cpacientes virtuales\u201d en los cuales usted deber\xe1 evaluar los reflejos fotopupilares directo e indirecto, para posteriormente indicar si los mismos son normales, o en caso que se encuentren alterados, en qu\xe9 estructura sospecha que asienta la lesi\xf3n."),e._UZ(7,"br")(8,"br"),e._uU(9," Tenga en cuenta que: "),e._UZ(10,"br"),e._uU(11," - Tendr\xe1 un tiempo limitado para resolver cada caso. "),e._UZ(12,"br"),e._uU(13," - Al iluminar uno de los ojos, tendr\xe1 4 segundos para ver la reacci\xf3n de ambas pupilas. "),e.TgZ(14,"strong"),e._uU(15,"No podr\xe1 iluminar el otro ojo hasta que no pasen los 4 segundos."),e.qZA(),e._UZ(16,"br"),e._uU(17," - Para cada paciente existe s\xf3lo una opci\xf3n correcta. "),e.qZA(),e.TgZ(18,"button",24),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.comenzarEjercicio())}),e._uU(19," Comenzar ejercicio "),e.qZA(),e._UZ(20,"hr"),e.qZA(),e.TgZ(21,"div")(22,"h5",25),e._uU(23,"Vista previa del ejercicio "),e.qZA(),e.TgZ(24,"figure"),e._UZ(25,"img",26),e.qZA()()()}}function Q(t,n){if(1&t&&(e.TgZ(0,"div",46),e._UZ(1,"input",47),e.TgZ(2,"label",48),e._uU(3),e.qZA()()),2&t){const i=n.$implicit;e.xp6(1),e.s9C("id",i.id),e.s9C("value",i.id),e.xp6(1),e.s9C("for",i.id),e.xp6(1),e.hij(" ",i.descripcion," ")}}function G(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"h2",30),e._uU(4," Paciente "),e.TgZ(5,"strong"),e._uU(6),e.qZA()()(),e.TgZ(7,"div",31)(8,"button",32),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.iluminarOjoDerecho())}),e._uU(9," Iluminar ojo derecho "),e.qZA(),e.TgZ(10,"button",33),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.iluminarOjoIzquierdo())}),e._uU(11," Iluminar ojo izquierdo "),e.qZA()(),e.TgZ(12,"div",34)(13,"figure"),e._UZ(14,"img",35)(15,"img",36)(16,"img",37)(17,"img",38)(18,"img",39),e.qZA()()(),e.TgZ(19,"div",28)(20,"h3"),e._uU(21,"Tiempo restante: "),e.TgZ(22,"strong"),e._uU(23),e.qZA()(),e.TgZ(24,"h4"),e._uU(25,"Seleccione su diagn\xf3stico"),e.qZA(),e.TgZ(26,"form",40),e.NdJ("ngSubmit",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.diagnosticar())}),e.YNc(27,Q,4,4,"div",41),e.TgZ(28,"button",42),e._UZ(29,"i",43),e._uU(30," Siguiente paciente "),e.qZA()(),e.TgZ(31,"p",44),e._uU(32,"Cantidad de pacientes diagnosticados:"),e.qZA(),e.TgZ(33,"p",45)(34,"strong"),e._uU(35),e.qZA()(),e.TgZ(36,"p",44),e._uU(37,"Cantidad de respuestas correctas: "),e.qZA(),e.TgZ(38,"p",45)(39,"strong"),e._uU(40),e.qZA()()()()}if(2&t){const i=e.oxw();e.xp6(6),e.hij("N\xb0 ",i.nroPaciente,""),e.xp6(17),e.hij(" ",i.temporizador," "),e.xp6(3),e.Q6J("formGroup",i.formularioPaciente),e.xp6(1),e.Q6J("ngForOf",i.diagnosticosPosibles),e.xp6(8),e.AsE(" ",i.cantPacientesRespondidos," / ",i.cantPacientesADiagnosticar," "),e.xp6(5),e.Oqu(i.cantRespuestasCorrectas)}}const V=[{path:"",component:m,children:[{path:"alumno",loadChildren:()=>s.e(996).then(s.bind(s,6996)).then(t=>t.AlumnoModule)},{path:"admin",loadChildren:()=>s.e(415).then(s.bind(s,7415)).then(t=>t.AdminModule),canActivate:[v],canLoad:[v]},{path:"perfil",component:D},{path:"ejercicio",component:(()=>{class t{constructor(i,o,r,_,w){this.authService=i,this.diagnosticoService=o,this.usuarioService=r,this.notaService=_,this.router=w,this.formularioPaciente=new a.nJ({respuestaElegida:new a.p4}),this.diagnosticosPosibles=[],this.cantPacientesADiagnosticar=-1,this.cantRespuestasCorrectas=0,this.cantPacientesRespondidos=0,this.tiempoRespuesta=0,this.temporizador=0,this.nroPaciente=1,this.idColorPerro=0,this.inicializarDiagnosticoActual()}ngOnInit(){this.cantPacientesADiagnosticar=this.usuarioService.configuracionAdmin.cantidadPacientesADiagnosticar,this.tiempoRespuesta=this.usuarioService.configuracionAdmin.tiempoRespuesta}get respuestaElegida(){return this.formularioPaciente.get("respuestaElegida")}iniciarTemporizador(){this.tiempoRespuesta>0?(this.temporizador=this.tiempoRespuesta,this.doCountdown()):l().fire("error","el temporiuzador no tiene tiempo","error")}inicializarDiagnosticoActual(){this.diagnosticoActual={id:"",descripcion:"",derIluminado_AchicaDer:!0,derIluminado_AchicaIzq:!0,izqIluminado_AchicaDer:!0,izqIluminado_AchicaIzq:!0}}reiniciarTemporizador(){this.temporizador=this.tiempoRespuesta}doCountdown(){this.intervalo=setTimeout(()=>{this.temporizador>0&&(this.temporizador--,this.processCountdown())},1e3)}processCountdown(){0===this.temporizador?(this.cantPacientesRespondidos++,clearInterval(this.intervalo),this.tiempoTerminadoSwal.fire()):this.doCountdown()}comenzarEjercicio(){try{this.diagnosticoService.obtenerTodosLosDiagnosticos().subscribe(i=>{this.diagnosticosPosibles=i.diagnosticos,this.diagnosticosPosibles.length>0?(this.diagnosticoActual=this.obtenerProximoDiagnostico(),this.iniciarTemporizador(),window.scrollTo({top:0,left:0,behavior:"smooth"})):l().fire("Error","No existen diagnosticos posibles en la base de datos","error")})}catch(i){console.log("Error en el comenzarEjercicio().  ",i)}}siguientePaciente(){if(this.cantPacientesADiagnosticar!==this.cantPacientesRespondidos){this.diagnosticoActual=this.obtenerProximoDiagnostico(),this.nroPaciente=this.nroPaciente+1,this.formularioPaciente.controls.respuestaElegida.reset();let i=Math.floor(4*Math.random()),o=0;for(;i==this.idColorPerro&&o<1e4;)i=Math.floor(4*Math.random()),o++;switch(console.log("aleatorio es ",i),console.log("limite es",o),i){case 1:this.cambiarColorPerro(100,0,0,100),this.idColorPerro=1;break;case 2:this.cambiarColorPerro(0,270,0,90),this.idColorPerro=2;break;case 3:this.cambiarColorPerro(0,0,60,100),this.idColorPerro=3;break;default:this.cambiarColorPerro(0,100,0,100),this.idColorPerro=0}this.iniciarTemporizador()}else this.autoevalucionFinalizadaSwal.fire()}crearNota(){const{DNI:i,name:o,surname:r}=this.authService.usuario,_=this.cantPacientesADiagnosticar,w=this.cantRespuestasCorrectas;let P=0;if(0!==_){P=w/_;let y=Number((100*Math.abs(P)).toPrecision(15));P=Math.round(y)/100*Math.sign(P)*100}this.notaService.crearNota(w,_,i,P,o,r).subscribe(y=>{l().fire("Nota guardada!","Tu calificacion fue de "+y.notas[0].calificacion,"success"),this.router.navigateByUrl(this.authService.usuario.isAdmin?"ocularVet/admin/notasAdmin":"ocularVet/alumno/notas")})}obtenerProximoDiagnostico(){let o,i=1e3;do{if(o=this.diagnosticosPosibles[Math.floor(Math.random()*this.diagnosticosPosibles.length)],!this.diagnosticoActual)return o;if(this.diagnosticoActual.id!==o.id)return o;i-=1}while(i>0);return o}diagnosticar(){this.temporizador=0,this.cantPacientesRespondidos++,this.formularioPaciente.value.respuestaElegida===this.diagnosticoActual.id?(this.cantRespuestasCorrectas++,this.respuestaCorrectaSwal.fire()):this.respuestaIncorrectaSwal.fire()}ngOnDestroy(){clearInterval(this.intervalo)}iluminarOjoDerecho(){const i=document.getElementById("linternaOjoDerecho");i.style.display="block";let o=setTimeout(()=>{i.style.display="none",clearInterval(o)},4e3);this.desactivarBotones(),this.diagnosticoActual.derIluminado_AchicaDer&&this.animacionPupila("derecha"),this.diagnosticoActual.derIluminado_AchicaIzq&&this.animacionPupila("izquierda")}iluminarOjoIzquierdo(){const i=document.getElementById("linternaOjoIzquierdo");i.style.display="block";let o=setTimeout(()=>{i.style.display="none",clearInterval(o)},4e3);this.desactivarBotones(),this.diagnosticoActual.izqIluminado_AchicaDer&&this.animacionPupila("derecha"),this.diagnosticoActual.izqIluminado_AchicaIzq&&this.animacionPupila("izquierda")}desactivarBotones(){const i=document.getElementById("botonIluminarOjoDerecho");i.setAttribute("disabled","true");const o=document.getElementById("botonIluminarOjoIzquierdo");o.setAttribute("disabled","true"),console.log("llego al descativar botones");let r=setInterval(()=>{i.removeAttribute("disabled"),o.removeAttribute("disabled"),clearInterval(r)},4e3)}animacionPupila(i){let o;"izquierda"===i?o=document.getElementById("pupilaIzquierda"):"derecha"===i&&(o=document.getElementById("pupilaDerecha")),o.style.transform="scale(0.6,0.6)",o.style.transition="0.5s";let r=setInterval(()=>{o.style.transform="scale(1,1)",clearInterval(r)},4e3)}cambiarColorPerro(i,o,r,_){document.getElementById("perro").style.filter=`grayscale(${i}%) \n                          saturate(${o}%)\n                          sepia(${r}%)\n                          contrast(${_}%)`}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(Z.e),e.Y36(k),e.Y36(T.i),e.Y36(U.v),e.Y36(d.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-ejercicio"]],viewQuery:function(i,o){if(1&i&&(e.Gf(J,5),e.Gf(R,5),e.Gf(L,5),e.Gf(Y,5)),2&i){let r;e.iGM(r=e.CRH())&&(o.tiempoTerminadoSwal=r.first),e.iGM(r=e.CRH())&&(o.respuestaCorrectaSwal=r.first),e.iGM(r=e.CRH())&&(o.respuestaIncorrectaSwal=r.first),e.iGM(r=e.CRH())&&(o.autoevalucionFinalizadaSwal=r.first)}},decls:28,vars:9,consts:[["lang","en"],["charset","utf-8"],["content","width=device-width, initial-scale=1.0","name","viewport"],["content","","name","description"],["content","","name","keywords"],["id","main",1,"main"],[1,"card"],[1,"card-header"],[1,"card-body"],["class","gridConsigna",4,"ngIf"],["class","grid","id","contenedorPrincipal",4,"ngIf"],["title","Se acab\xf3 el tiempo","icon","warning",3,"allowOutsideClick","confirm"],["tiempoTerminadoSwal",""],["title","Respuesta correcta!","icon","success",3,"allowOutsideClick","confirm"],["respuestaCorrectaSwal",""],["title","Respuesta incorrecta","icon","error",3,"allowOutsideClick","text","confirm"],["respuestaIncorrectaSwal",""],["title","Autoevaluci\xf3n finalizada","icon","info",3,"allowOutsideClick","text","confirm"],["autoevalucionFinalizadaSwal",""],["href","#",1,"back-to-top","d-flex","align-items-center","justify-content-center"],[1,"bi","bi-arrow-up-short"],[1,"gridConsigna"],[1,"contenedorConsigna"],[1,"parrafo"],["id","BtnComenzarEjercicio",1,"btn","btn-primary",3,"click"],[2,"font-style","italic"],["src","../../../assets/images/consigna1.webp","id","perroConsigna"],["id","contenedorPrincipal",1,"grid"],[1,"columna"],[2,"display","flex"],[2,"margin","auto"],["id","contenedorBotonesOjos"],["id","botonIluminarOjoDerecho",1,"btn","btn-info",2,"margin","auto",3,"click"],["id","botonIluminarOjoIzquierdo",1,"btn","btn-info",2,"margin","auto",3,"click"],["id","contenedorImagenPerro"],["src","../../../assets/images/HUSKY-SIN_1.webp","id","perro"],["src","../../../assets/images/HUSKY-IZQ_1.webp","id","pupilaDerecha"],["src","../../../assets/images/HUSKY-IZQ_1.webp","id","pupilaIzquierda"],["src","../../../assets/images/linterna.webp","id","linternaOjoIzquierdo"],["src","../../../assets/images/linterna.webp","id","linternaOjoDerecho"],[3,"formGroup","ngSubmit"],["class","form-check py-1",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","my-3",2,"margin-left","calc(20%)"],[1,"bi","bi-eye-fill"],[1,"m-0"],[2,"text-align","center"],[1,"form-check","py-1"],["type","radio","formControlName","respuestaElegida","name","respuestaElegida","required","",1,"form-check-input",3,"id","value"],[1,"form-check-label",3,"for"]],template:function(i,o){1&i&&(e.TgZ(0,"html",0)(1,"head"),e._UZ(2,"meta",1)(3,"meta",2),e.TgZ(4,"title"),e._uU(5,"OcularVet - Diagn\xf3stico"),e.qZA(),e._UZ(6,"meta",3)(7,"meta",4),e.qZA(),e.TgZ(8,"main",5)(9,"div",6)(10,"div",7)(11,"h1"),e._uU(12,"Diagn\xf3stico"),e.qZA()(),e.TgZ(13,"div")(14,"div",6)(15,"div",8),e.YNc(16,B,26,0,"div",9),e.YNc(17,G,41,7,"div",10),e.TgZ(18,"swal",11,12),e.NdJ("confirm",function(){return o.siguientePaciente()}),e.qZA(),e.TgZ(20,"swal",13,14),e.NdJ("confirm",function(){return o.siguientePaciente()}),e.qZA(),e.TgZ(22,"swal",15,16),e.NdJ("confirm",function(){return o.siguientePaciente()}),e.qZA(),e.TgZ(24,"swal",17,18),e.NdJ("confirm",function(){return o.crearNota()}),e.qZA()()()()()(),e.TgZ(26,"a",19),e._UZ(27,"i",20),e.qZA()()),2&i&&(e.xp6(16),e.Q6J("ngIf",o.diagnosticosPosibles.length<1),e.xp6(1),e.Q6J("ngIf",o.diagnosticosPosibles.length>0),e.xp6(1),e.Q6J("allowOutsideClick",!1),e.xp6(2),e.Q6J("allowOutsideClick",!1),e.xp6(2),e.MGl("text","La respuesta correcta era: ",o.diagnosticoActual.descripcion,""),e.Q6J("allowOutsideClick",!1),e.xp6(2),e.hYB("text","Cantidad de respuestas correctas: ",o.cantRespuestasCorrectas," / ",o.cantPacientesADiagnosticar,""),e.Q6J("allowOutsideClick",!1))},dependencies:[g.sg,g.O5,a._Y,a.Fj,a._,a.JJ,a.JL,a.Q7,a.sg,a.u,h.q1],styles:[".grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;grid-auto-flow:row dense;grid-auto-rows:minmax(170px,auto);gap:20px;justify-items:center}.gridConsigna[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-auto-flow:row dense;grid-auto-rows:minmax(170px,auto);gap:20px;justify-items:center}@media (max-width: 750px){.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-auto-flow:row dense;grid-auto-rows:minmax(170px,auto);gap:var(--gap)}}@media (max-width: 1100px){.gridConsigna[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-auto-flow:row dense;grid-auto-rows:minmax(170px,auto);gap:var(--gap)}hr[_ngcontent-%COMP%]{display:block;height:8px;background-color:#7b1fa2;border-radius:2px}#perroConsigna[_ngcontent-%COMP%]{position:relative;min-height:200px;max-height:450px;margin-top:15px}}@media (min-width: 1100px){hr[_ngcontent-%COMP%]{display:none}}.parrafo[_ngcontent-%COMP%]{text-align:justify}.contenedorConsigna[_ngcontent-%COMP%]{align-items:center;justify-content:start}#BtnComenzarEjercicio[_ngcontent-%COMP%]{margin-left:50%;transform:translate(-50%)}#contenedorBotonesOjos[_ngcontent-%COMP%]{display:flex;margin-bottom:10px}figure[_ngcontent-%COMP%]{position:relative}#contenedorPrincipal[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .columna[_ngcontent-%COMP%]{padding-left:30px}#perro[_ngcontent-%COMP%]{position:relative;width:100%;height:60%}#perroConsigna[_ngcontent-%COMP%]{position:relative;width:100%;min-height:200px}#pupilaDerecha[_ngcontent-%COMP%]{position:absolute;left:35%;top:27.5%;width:6%}#pupilaIzquierda[_ngcontent-%COMP%]{position:absolute;left:62.8%;top:28.8%;width:6%}.btn-info[_ngcontent-%COMP%]:disabled{color:#fff;background:#d5000065;border-color:#d5000065}#contenedorImagenPerro[_ngcontent-%COMP%]{display:inline-block}#linternaOjoIzquierdo[_ngcontent-%COMP%]{position:absolute;width:40%;height:40%;top:37%;left:60%;transform:rotate(45deg);display:none;z-index:1}#linternaOjoDerecho[_ngcontent-%COMP%]{position:absolute;width:40%;height:40%;top:37%;left:8%;transform:rotate(135deg);display:none;z-index:1}.btn-primary[_ngcontent-%COMP%]{color:#fff;background:#7b1fa2;border-color:#7b1fa2}.btn-primary[_ngcontent-%COMP%]:hover{color:#fff;background:#012970;border-color:#012970}"]}),t})()},{path:"**",redirectTo:"ejercicio"}]}];let K=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(V),d.Bz]}),t})(),H=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,K,a.u5,a.UX,h.ii]}),t})()},3456:(x,A,s)=>{s.d(A,{v:()=>Z});var g=s(529),a=s(2340),h=s(8505),d=s(262),f=s(9646),e=s(1571);let Z=(()=>{class v{constructor(u){this.http=u,this.baseUrl=a.N.baseURL}obtenerNotas(){return this.http.get(`${this.baseUrl}/nota/obtenerNotas`).pipe((0,h.b)(c=>(console.log("rcantidad de preguntas: ",c),c)),(0,d.K)(c=>(0,f.of)(c.error.msg)))}obtenerNotasUsuario(u,c){const p=`${this.baseUrl}/nota/obtenerNotas`,b=(new g.WM).set("DNI",c.toString());return this.http.get(p,{headers:b}).pipe((0,h.b)(l=>l),(0,d.K)(l=>(0,f.of)(l.error.msg)))}crearNota(u,c,p,m,b,l){return this.http.post(`${this.baseUrl}/nota/crearNota`,{DNI:p,cantidadPreguntas:c,rtasCorrectas:u,name:b,surname:l,calificacion:m}).pipe((0,h.b)(C=>{C.ok&&console.log("Creo la nota en la base de datos")}),(0,d.K)(C=>(0,f.of)(C.error.msg)))}modificarNombre_y_apellido(u,c,p){return this.http.put(`${this.baseUrl}/nota/modificarNombre_y_apellido`,{DNI:u,name:c,surname:p}).pipe((0,h.b)(l=>{l.ok&&console.log("Modifico el nombre y apellido de la nota en la base de datos")}),(0,d.K)(l=>(0,f.of)(l.error.msg)))}eliminarNota(u){const c=`${this.baseUrl}/nota/eliminarNota`,p=(new g.WM).set("_id",u.toString());return this.http.delete(c,{headers:p}).pipe((0,h.b)(m=>{console.log("Elimino la nota, respuesta: ",m)}),(0,d.K)(m=>(0,f.of)(m.error.msg)))}eliminarNotasUsuario(u){const c=`${this.baseUrl}/nota/eliminarNotasUsuario`,p=(new g.WM).set("DNI",u.toString());return this.http.delete(c,{headers:p}).pipe((0,h.b)(m=>{console.log("Elimino la nota, respuesta: ",m)}),(0,d.K)(m=>(0,f.of)(m.error.msg)))}}return v.\u0275fac=function(u){return new(u||v)(e.LFG(g.eN))},v.\u0275prov=e.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()}}]);